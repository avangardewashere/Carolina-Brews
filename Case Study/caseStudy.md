# Inventory Management System

## What is Inventory management system

An inventory management system is software that helps businesses track, organize, and manage their products and supplies. It allows companies to keep accurate records of what items they have in stock, where those items are located, how many are available, and when they need to order more.

At its core, an inventory management system helps answer basic questions like:

- What products do we have?
- How many of each item do we have?
- Where are these items located?
- When do we need to reorder?
- Which items are selling quickly or slowly?

The system typically handles functions such as tracking stock levels, processing purchase orders and sales orders, managing suppliers and customers, and generating reports that help businesses make smarter decisions about their inventory. For businesses of all sizes, from small shops to large warehouses, it's an essential tool for reducing costs, preventing stockouts, and improving overall efficiency.

# Perfect Clients for Inventory Management Systems

## Client 1: Mountain Craft Brewers

### Company Overview

Carolina Brewsis a mid-sized craft brewery located in Colorado that produces a range of specialty beers. Founded in 2018, they currently distribute to local restaurants, bars, and liquor stores across three neighboring states. They have a production facility with an attached warehouse, a small tasting room, and administrative offices. Carolina Brewsemploys 35 people across production, sales, and administration.

### Business Needs

As a brewery, Carolina Brewsdeals with both raw materials (hops, malt, yeast, bottles, cans, packaging materials) and finished products (different beer varieties). They don't sell directly to consumers through e-commerce but have wholesale relationships with distributors, restaurants, and retail stores.

### How They Use the Inventory Management System

### Inventory Management

**Products**
Carolina Brewsmaintains two categories of inventory in their system:

- **Raw Materials**: The brewery tracks ingredients like different varieties of hops, malts, yeasts, and packaging materials (bottles, cans, labels, six-pack holders, etc.). Each item has a SKU, current quantity, and minimum stock level.
- **Finished Products**: Their 12 beer varieties in various packaging formats (six-packs, cases, kegs, etc.) are tracked by SKU, with batch numbers for quality control and expiration date tracking.

**Warehouse Management**
The brewery has divided their warehouse into specific zones:

- Raw Materials Storage (temperature-controlled for hops and yeast)
- Packaging Materials Storage
- Finished Product Cold Storage
- Distribution Staging Area

Within the inventory system, each location has a designated code, allowing the team to quickly locate materials and track where specific batches of beer are stored.

**Stock Adjustments**
The brewery regularly performs stock adjustments for various reasons:

- **Damaged Inventory**: When bottles break or ingredients spoil
- **Quality Control Rejections**: When beer batches don't meet quality standards
- **Samples**: Beer used for tastings, quality control, or provided as samples to potential customers
- **Expired Inventory**: When raw materials or finished products reach their expiration date

For example, when a recent summer ale batch didn't meet their quality standards, the production manager created a stock adjustment in the system, changing the status of 15 kegs from "Available" to "Quality Hold" with detailed notes on the issue.

**Stock Transfers**
As beer completes the production process, the system records stock transfers:

- From "In Production" to "Finished Goods Cold Storage"
- From "Cold Storage" to "Distribution Staging" as orders are prepared
- Between different warehouse locations as space needs change

**Stock Counts**
The brewery performs:

- Weekly cycle counts of fast-moving items
- Monthly counts of all finished products
- Quarterly complete inventory audits of all materials and products

These counts are entered into the inventory system, which automatically flags discrepancies that require investigation.

### Sales Management

**Customers**
The system maintains detailed records for all of Mountain Craft's customers, which include:

- Distributors (who supply multiple locations)
- Individual restaurants and bars
- Retail stores

Each customer record includes contact information, shipping address, tax information, payment terms, and pricing tier.

**Sales Orders**
When a restaurant chain places an order for 10 kegs of Mountain Craft's popular IPA and 20 cases of their amber ale, the sales team:

1. Creates a sales order in the system with the customer information
2. Selects the products and quantities
3. The system automatically checks current inventory levels
4. Applies the appropriate pricing tier for that customer
5. Calculates taxes and totals

**Sales Quotes**
For new potential customers, the brewery often provides quotes before finalizing orders. For example, when approaching a new regional chain of liquor stores, the sales team prepares a formal quote showing:

- Proposed products and quantities
- Special introductory pricing
- Volume discounts
- Delivery timeline
This quote has an expiration date and can be converted to a sales order if accepted.

**Invoicing**
Once a sales order is fulfilled, the system automatically generates an invoice that includes:

- Invoice number (for tracking)
- Reference to the original sales order
- Itemized list of products shipped
- Payment terms (e.g., Net 30)
- Total amount due with tax breakdown

The brewery's accounting team uses these invoices to track receivables and manage cash flow.

### Purchasing Management

**Suppliers**
Mountain Craft's inventory system maintains records for all their suppliers:

- Malt suppliers from the Midwest
- Hop suppliers from Washington and Oregon
- Packaging suppliers for bottles, cans, and labels
- Yeast labs and other brewing supply companies

Each supplier record includes contact information, typical lead times, minimum order requirements, and pricing.

**Purchase Orders**
The head brewer plans a special seasonal beer that requires a specific variety of German hops. The process works as follows:

1. The system alerts that this ingredient needs to be ordered (based on production forecasts)
2. The brewing team creates a purchase order specifying:
    - The exact hop variety needed
    - Quantity required
    - Required delivery date
    - Price negotiated with the supplier
3. The PO is sent to the supplier
4. The system tracks the PO as "Ordered" until delivery

**Purchase Quotes**
For expensive equipment or large ingredient orders, Mountain Craft often requests quotes from multiple suppliers. These quotes are stored in the system and compared for price, delivery timeframe, and terms before creating a purchase order.

### Reporting and Analytics

Mountain Craft relies heavily on the reporting features to make business decisions:

- **Inventory Valuation Reports**: Help them understand the value of raw materials and finished goods on hand
- **Sales Analysis Reports**: Show which beer varieties sell best in which markets
- **Supplier Performance Reports**: Track on-time deliveries and price trends
- **Inventory Turnover Reports**: Identify slow-moving products that may need marketing attention
- **Forecasting Reports**: Help anticipate seasonal demand fluctuations

The head brewer uses projected sales reports to plan production schedules and ensure sufficient raw materials are available for upcoming batches.

### Additional Features Used

**Batch Tracking**
For quality control and regulatory compliance, Carolina Brewstracks every batch of beer produced with:

- Batch number
- Production date
- Expiration date
- Ingredients used (with supplier batch information)
- Quality control test results

If a quality issue arises, they can quickly identify and locate all products from a specific batch.

**Recipe/Bill of Materials Management**
The brewery stores detailed recipes for each beer variety as Bills of Materials (BOMs) in the system:

- Exact quantities of each ingredient
- Production time requirements
- Expected yield

When a production run is scheduled, the system automatically calculates raw material requirements and can create purchase orders for anything that's not in stock.

**User Roles and Permissions**
Different team members have specific access levels:

- Brewers can view and update recipes and production information
- Warehouse staff manage inventory locations and fulfillment
- Sales team creates and manages customer orders
- Managers have access to financial reports and analytics
- Owners and executives can view all system areas and reports

---

## Client 2: GreenThumb Garden Supply

### Company Overview

GreenThumb Garden Supply is a garden center and landscaping supply business with three physical retail locations across the Seattle metropolitan area. Founded in 2010, they've grown from a small plant nursery to a comprehensive gardening business offering plants, tools, soils, hardscaping materials, and garden décor. They employ 45 people across their retail locations, warehouse, delivery fleet, and online operations.

### Business Needs

GreenThumb operates both brick-and-mortar retail locations and an e-commerce website. They also provide wholesale supplies to local landscaping companies and manage seasonal inventory fluctuations. Their diverse product range includes perishable items (plants), bulk materials (soil, mulch, gravel), and durable goods (tools, pottery, furniture).

### How They Use the Inventory Management System

### Inventory Management

**Products**
GreenThumb manages over 5,000 SKUs across several major categories:

- **Live Plants**: Trees, shrubs, perennials, annuals, vegetables, herbs, houseplants
- **Gardening Supplies**: Soils, fertilizers, mulches, pesticides
- **Tools & Equipment**: Hand tools, power tools, irrigation supplies
- **Garden Décor**: Pots, statuary, lighting, furniture
- **Bulk Materials**: Soil, compost, gravel, decorative stone (sold by volume)

Each product in the system includes:

- SKU, barcode, and product images
- Detailed descriptions and specifications
- Current stock level at each location
- Minimum stock levels for automatic reordering
- Supplier information
- Cost and various price points (retail, wholesale, sale)
- Seasonality flag (for automated season-based reordering)

For live plants, additional fields track growing information, sunlight requirements, water needs, and seasonality.

**Multi-Location Inventory**
With three retail locations plus a central warehouse, GreenThumb relies heavily on the multi-location tracking features:

- Each store maintains its own inventory of fast-moving items
- The central warehouse holds backup stock and bulk items
- The system shows real-time stock levels at each location
- When a customer at the north Seattle store wants a specific ornamental tree that's only in stock at the south location, staff can instantly see this and arrange an internal transfer

**Stock Adjustments**
As a garden center dealing with live plants, stock adjustments are a daily necessity:

- **Shrinkage**: Plants that don't survive or deteriorate in quality
- **Damaged Goods**: Broken pottery or damaged packaging
- **Display Use**: Products used for store displays or demonstration gardens
- **Employee Gardens**: Plants and products used in the staff demonstration garden

For example, after a particularly hot week, the perennials manager might perform a stock adjustment writing off 15 hydrangea plants that suffered heat damage, categorizing them as "Shrinkage" and noting "Heat damage - not saleable."

**Barcode System**
GreenThumb uses the barcode scanning features extensively:

- All incoming inventory is scanned at receiving
- Store associates use mobile scanners to check prices and inventory
- Cashiers scan items at POS for quick checkout
- Warehouse staff scan items during picking to ensure accuracy

**Cycle Counting**
Rather than closing for full inventory counts, GreenThumb uses cycle counting:

- Fast-moving seasonal items are counted weekly
- Each department is counted monthly on a rotating schedule
- Full inventory is verified quarterly
- Count discrepancies trigger automatic alerts for investigation

### Sales Management

**Point of Sale Integration**
GreenThumb's inventory system integrates directly with their POS systems at all three locations:

- Sales automatically reduce inventory in real-time
- Low stock alerts notify managers when replenishment is needed
- Returns are processed through the POS and update inventory immediately
- Staff can check availability at other locations directly from the register

**E-commerce Integration**
Their online store connects directly to the inventory system:

- Website shows real-time availability
- Online orders automatically reserve inventory
- Ship-from-store and pickup-in-store options show available fulfillment locations
- When inventory reaches low thresholds, items are automatically marked as "Limited Availability"

**Customer Management**
The system maintains detailed records for different customer types:

- Retail customers in the loyalty program
- Professional landscapers (with wholesale pricing)
- Municipal and commercial accounts
- School and nonprofit organizations (with special discount structures)

Each customer profile includes purchase history, preferred location, special pricing eligibility, and communications preferences.

**Sales Orders and Fulfillment**
When Green Valley Landscaping places a large order for a commercial project, GreenThumb's process works as follows:

1. Sales staff create a sales order in the system with:
    - The landscape company's account information (accessing their wholesale pricing tier)
    - All required products and quantities
    - Requested delivery date
    - Special instructions for the job site
2. The system checks inventory across all locations
3. A fulfillment plan is created, showing which items will come from which locations
4. Warehouse staff receive picking lists organized by location
5. The delivery team gets routing information and delivery instructions
6. Upon delivery, the customer signs on a mobile device, automatically triggering invoice creation

**Gift Cards and Store Credit**
The system tracks:

- Gift card issuance and redemption
- Store credit from returns
- Loyalty program points and rewards

### Purchasing Management

**Suppliers**
GreenThumb works with over 100 suppliers, including:

- Regional plant nurseries and growers
- National garden supply distributors
- Specialty pottery and décor importers
- Local bulk material providers (soil, mulch, stone)

The system maintains detailed supplier profiles with:

- Contact information and preferred communication methods
- Product catalogs and pricing
- Lead times and shipping methods
- Minimum order requirements
- Performance metrics (on-time delivery percentage, order accuracy)

**Seasonal Purchasing**
The garden industry is highly seasonal, and GreenThumb uses the system's forecasting tools to plan seasonal purchases:

1. Historical sales data helps predict demand for spring, summer, and holiday seasons
2. Automated purchasing plans are created months in advance
3. Purchase orders are scheduled for just-in-time delivery to maximize freshness of plant material
4. The system suggests optimal quantities based on previous years' sales, adjusted for growth

**Purchase Orders**
When preparing for spring planting season, the perennial buyer creates purchase orders for dozens of suppliers:

1. The system identifies needed inventory based on:
    - Current stock levels
    - Predetermined minimum levels for the spring season
    - Sales forecasts
2. Purchase orders are created with:
    - Itemized product lists with quantities
    - Negotiated pricing
    - Requested delivery dates scheduled throughout the season
    - Special instructions for delivery (loading dock requirements, etc.)
3. The system tracks orders as "Placed," "Confirmed," "Partially Received," or "Completed"

**Receiving and Quality Control**
When plant deliveries arrive, GreenThumb's receiving process is critical:

1. The receiving team scans the purchase order in the system
2. As plants are unloaded, they're checked against the order
3. Quality issues are noted and photographic evidence is attached to the record
4. Quantities are adjusted if the delivery doesn't match the order
5. The inventory is immediately updated and available for sale
6. Any discrepancies trigger communication with the supplier

### Reporting and Analytics

GreenThumb relies heavily on data to make business decisions:

- **Sales by Department**: Tracks performance of each product category
- **Sales by Location**: Compares the three retail locations
- **Seasonal Trends**: Maps sales patterns to optimize purchasing
- **Gross Margin Reports**: Identifies most and least profitable products
- **Inventory Aging**: Flags slow-moving items for promotion or clearance
- **Supplier Performance**: Evaluates suppliers on price, quality, and reliability
- **E-commerce Analytics**: Compares online vs. in-store shopping patterns

The management team reviews dashboard reports each morning showing:

- Yesterday's sales by location
- Current inventory value
- Pending purchase orders
- Items that have reached reorder points
- Upcoming deliveries

### Additional Features Used

**Special Order Management**
GreenThumb frequently handles special orders for customers:

1. A customer requests a specific variety of Japanese maple not normally stocked
2. Staff creates a special order in the system
3. A purchase order to the supplier is generated
4. The customer pays a deposit, recorded in the system
5. Upon arrival, the customer is automatically notified
6. When picked up, the final payment is processed and inventory is updated

**Bulk Materials Management**
For soil, mulch, and stone sold by volume:

1. Initial inventory is recorded by cubic yard
2. Sales reduce the available quantity
3. The system converts between cubic yards (how it's stored) and cubic feet (how smaller quantities are sold)
4. Reorder points trigger new purchase orders to replenish bulk materials

**Rental Equipment Tracking**
GreenThumb rents specialty gardening equipment, managed through the inventory system:

- Each piece of equipment has a unique identifier
- The system tracks availability and scheduled returns
- Maintenance schedules are managed through the system
- Rental history helps determine when equipment should be replaced

**Consignment Items**
Some specialty garden art is sold on consignment:

1. Items are entered into inventory as consignment goods
2. The system tracks the artist/supplier, agreed commission rates, and duration of consignment
3. Upon sale, the system calculates the amount owed to the consigner
4. Monthly consignment reports help manage payments to suppliers

By using an integrated inventory management system, GreenThumb Garden Supply has streamlined operations across physical and online sales channels, maintained appropriate stock levels despite seasonal fluctuations, and gained valuable business insights that have contributed to their continued growth in a competitive market

# Inventory Management System MVP & Future Features

Based on the needs of both Carolina Brewsand GreenThumb Garden Supply, here's a prioritized breakdown of features for an MVP launch and future development phases.

## MVP Features (Critical for Initial Launch)

### Core Inventory Management

1. **Basic Product Catalog**
    - Product creation and management (name, SKU, description)
    - Basic categorization
    - Cost and selling price fields
    - Minimum stock level settings
2. **Inventory Tracking**
    - Real-time quantity tracking
    - Low stock alerts/notifications
    - Basic inventory history
3. **Basic Multi-location Support**
    - Track inventory across different locations (vital for GreenThumb's multiple stores)
    - Simple stock transfer between locations
4. **Simple Stock Adjustments**
    - Ability to record inventory changes (damage, loss, etc.)
    - Basic reason codes for adjustments
    - Adjustment history

### Sales Management

1. **Sales Order Processing**
    - Create and fulfill customer orders
    - Basic customer management
    - Order status tracking
    - Simple invoice generation
2. **Customer Management**
    - Basic customer database (contact info, addresses)
    - Simple customer categorization (retail vs. wholesale)

### Purchasing Management

1. **Purchase Order Creation**
    - Create and track supplier orders
    - Basic receiving functionality
    - Purchase order status tracking
2. **Supplier Management**
    - Basic supplier database
    - Product-supplier relationships

### Reporting

1. **Essential Reports**
    - Current inventory levels
    - Low stock reports
    - Basic sales reports
    - Simple purchase order status reports

### User Management

1. **Basic User Roles**
    - Admin access
    - Standard user access
    - Simple permissions

## Phase 2 Features (Post-MVP Release)

### Enhanced Inventory Management

1. **Advanced Product Management**
    - Multiple images
    - Extended attributes and specifications
    - Variant management (size, color, etc.)
    - Custom fields for specific industries
2. **Batch/Lot Tracking**
    - Track products by batch or lot number
    - Expiration date management (crucial for Mountain Craft's beer and GreenThumb's plants)
    - FIFO/LIFO inventory management
3. **Advanced Stock Counts**
    - Scheduled cycle counts
    - Full inventory audits
    - Variance reporting
    - Mobile stock counting

### Enhanced Sales Management

1. **Quotes and Estimates**
    - Create quotes that convert to orders
    - Expiration dates for quotes
    - Quote approval processes
2. **Advanced Customer Management**
    - Customer-specific pricing
    - Credit limits and payment terms
    - Purchase history analytics
    - Customer communications log
3. **Basic E-commerce Integration**
    - Inventory sync with online store (for GreenThumb)
    - Web order import
    - Basic stock reservation

### Enhanced Purchasing Management

1. **Purchase Planning**
    - Reorder point automation
    - Purchase suggestions based on sales
    - Vendor price comparison
2. **Advanced Receiving**
    - Partial order receiving
    - Quality control checklists
    - Return to vendor processing
    - Barcode scanning during receiving

### Advanced Reporting

1. **Enhanced Analytics**
    - Inventory turnover analytics
    - Sales trend analysis
    - Product performance metrics
    - Supplier performance tracking

## Phase 3 Features (Future Enhancements)

### Advanced Inventory Features

1. **Bill of Materials/Recipes**
    - Component tracking for manufactured items (crucial for Mountain Craft's brewing recipes)
    - Automated component consumption
    - Production planning
2. **Barcode/QR Code System**
    - Label generation
    - Mobile scanning
    - Inventory movement tracking via scan
3. **Advanced Multi-location**
    - Location-specific pricing
    - Transfer rules and workflows
    - Bin/shelf location tracking within warehouses

### Advanced Sales Features

1. **Point of Sale Integration**
    - Direct POS connection (for GreenThumb's retail operations)
    - Real-time inventory updates from sales
    - Returns processing
2. **Full E-commerce Integration**
    - Multi-channel inventory sync
    - Automated fulfillment workflows
    - Real-time availability updates
3. **Advanced Order Management**
    - Partial fulfillment
    - Backorder management
    - Dropshipping capabilities
    - Shipping integration

### Advanced Purchasing Features

1. **Vendor Performance Metrics**
    - On-time delivery tracking
    - Price trend analysis
    - Quality metrics
    - Automated vendor scoring
2. **Contract/Agreement Management**
    - Pricing agreements
    - Volume discounts
    - Contract expiration monitoring

### Business Intelligence

1. **Advanced Analytics Dashboard**
    - Custom report builder
    - Data visualization tools
    - Predictive analytics for demand
    - Scheduled report delivery
2. **Forecasting Tools**
    - Seasonal trend analysis
    - Demand prediction
    - Inventory optimization suggestions

### Specialized Features

1. **Rental/Consignment Management**
    - For GreenThumb's equipment rentals and consignment items
    - Availability tracking
    - Maintenance scheduling
    - Revenue sharing calculations
2. **Bulk Materials Management**
    - For GreenThumb's soil, mulch, and gravel
    - Unit conversion (yards to pounds, etc.)
    - Density and volume calculations
3. **Quality Control and Testing**
    - For Mountain Craft's beer production
    - Test result tracking
    - Batch release workflows
    - Quality hold functionality
4. **Mobile Applications**
    - Field sales capabilities
    - Warehouse management app
    - Inventory counting app
    - Delivery confirmation app

## Implementation Strategy

1. **Focus the MVP on the core inventory, basic sales, and purchasing functionality** that both businesses absolutely need to operate day-to-day.
2. **Prioritize Mountain Craft's batch tracking and GreenThumb's multi-location features** early in Phase 2, as these are critical to their respective operations.
3. **Implement industry-specific features in Phase 3** after the core system is stable and well-adopted by users.
4. **Plan for integration capabilities from the beginning** to ensure the system can connect with other business tools (accounting, e-commerce, POS) as needed.

This phased approach will allow both companies to quickly implement essential inventory management functionality while establishing a roadmap for adding more sophisticated capabilities over time as their needs and system familiarity grows.

For the minimum company information needed during onboarding that would be sufficient for invoices and other documents, you should collect:

1. **Legal Company Name** - The official registered name of the business
2. **Business Address** - Primary physical location address
3. **Contact Phone Number** - Main business phone
4. **Contact Email** - Primary business email
5. **Tax ID Number** - Required for tax purposes (EIN, VAT number, etc.)
6. **Default Currency** - For pricing and financial calculations

If you want to keep it absolutely minimal while still having functional documents, these six fields would cover the essential legal and contact information required for valid invoices and business documents.

Optional but recommended additions (if still keeping it minimal):

- Logo (for document branding)
- Company registration number (if different from tax ID)
- Website URL

This information is sufficient to satisfy basic legal requirements for business documents while not overwhelming users during the initial onboarding process.

# Building a Scalable Inventory Management System

## Technical Architecture Approach

We're building our inventory management system with a clear separation between frontend and backend to ensure maximum scalability and flexibility as our user base grows.

### Frontend (UI Layer)

- **Next.js with TypeScript and Tailwind CSS**
- Responsible for user interface, interactions, and experience
- Communicates exclusively through API calls to the backend
- Modular component architecture for reusability

### Backend (API Layer)

- **Initial Implementation**: Next.js API routes
- **Future Options**: Node.js Express, Python, Java, Laravel, or Encore
- RESTful API design with standardized endpoints
- Robust authentication and authorization

## The Approach & Rationale

### 1. API-First Architecture

We're taking an API-first approach, meaning all system functionality will be exposed through a well-documented, standardized API. This provides several key advantages:

- **Backend Interchangeability**: By keeping a strict separation between frontend and backend, we can replace or upgrade the backend technology without disrupting the user experience.
- **Multiple Clients**: The same API can serve our web application, mobile apps, or third-party integrations.
- **Incremental Development**: We can build and test parts of the system independently.

### 2. Starting with Next.js API Routes

For our MVP phase, we'll use Next.js API routes for our backend because:

- **Rapid Development**: Same technology stack as our frontend enables faster initial development
- **Simplified Deployment**: Single codebase deployment reduces operational complexity for the MVP
- **Production-Ready**: Capable of handling production loads for early-stage deployments
- **Easier Debugging**: Development team can work in a unified TypeScript environment

### 3. Preparing for Backend Migration

From day one, we'll implement practices that will facilitate later migration to a dedicated backend:

- **Clean Service Layer**: Business logic will live in separate service modules, not directly in API route handlers
- **Domain-Driven Design**: Organizing code around business domains rather than technical concerns
- **Infrastructure Abstraction**: Database access and external services will be accessed through abstraction layers
- **Comprehensive Test Coverage**: Ensuring functionality works regardless of the underlying implementation

### 4. Long-term Scaling Strategy

As our user base grows, we can migrate to a more specialized backend:

- **Microservices Potential**: Breaking down into smaller, domain-specific services (inventory, sales, purchasing)
- **Technology Optimization**: Selecting the optimal technology for each specific part of the system
- **Geographic Distribution**: Deploying closer to users in different regions
- **Horizontal Scaling**: Handling increased load through additional instances rather than larger servers

## Benefits for Stakeholders

- **For Users**: Consistent, responsive experience even as the system grows
- **For Business**: Ability to start with lower infrastructure costs, then scale as revenue grows
- **For Developers**: Familiar tools for MVP, clear path to more specialized technologies when needed
- **For Operations**: Simplified initial deployment, gradual complexity increase rather than big-bang migrations

This architecture gives us a clear path from MVP to enterprise-grade solution, allowing us to move quickly now while making decisions that won't limit our future growth

# How the Inventory Management System Works - From Setup to Daily Operations

Let me explain how all these models work together to form a complete inventory management system with POS integration:

## 1. Initial System Setup

### Location & User Setup

When a company first gets the system:

1. **Create Locations** (warehouses/shops):
    - Admin creates locations using the `Location` model
    - Each physical store or warehouse is set up with its address and type
2. **Create Users**:
    - Admin creates user accounts with appropriate roles (ADMIN, MANAGER, STAFF)
    - Users are assigned to specific locations where they work

### Product Catalog Setup

1. **Create Categories**:
    - Set up a hierarchical category structure for organizing products
    - The `Category` model allows for parent-child relationships
2. **Add Suppliers**:
    - Register all vendors/suppliers in the `Supplier` model
    - Store contact details and payment terms
3. **Create Items**:
    - Add all products to the master `Item` table
    - Set properties like SKU, barcode, price, and category
    - Link items to their suppliers
    - Set min/max stock levels for reordering

## 2. Purchasing Flow

### Creating Purchase Orders

1. **Purchase Order Creation**:
    - User creates a new PO in the `PurchaseOrder` model
    - Selects supplier and delivery location
    - Adds items via `PurchaseOrderLine` with quantities and prices
    - System calculates totals and generates a unique PO number
    - PO status starts as "DRAFT"
2. **PO Approval Workflow**:
    - Manager reviews and changes status to "APPROVED"
    - PO is sent to supplier
    - Status changes to "SUBMITTED"

### Receiving Inventory

1. **Goods Receipt**:
    - When items arrive, warehouse staff creates a `GoodsReceipt`
    - Links receipt to original PO
    - Records received quantities for each item via `GoodsReceiptLine`
    - Can handle partial deliveries (some items received, others pending)
2. **Inventory Update**:
    - System automatically increases quantities in the `Inventory` model
    - For the specific location where goods were received
    - For serialized items, individual `SerialNumber` records are created
    - PO status updates to "PARTIALLY_RECEIVED" or "RECEIVED"

## 3. Stock Management

### Inventory Tracking

1. **Real-time Stock Levels**:
    - `Inventory` model maintains current quantities for each item at each location
    - Additional `reservedQuantity` field tracks items committed but not yet shipped

### Transfers Between Locations

1. **Stock Transfers**:
    - When stock needs to move between locations, a `Transfer` is created
    - Items are added via `TransferLine` with quantities
    - Status changes from "DRAFT" to "IN_TRANSIT" when dispatched
    - Receiving location confirms receipt, changing status to "COMPLETED"
    - System automatically decreases inventory at source and increases at destination

### Inventory Adjustments

1. **Handling Discrepancies**:
    - When physical count differs from system count, an `Adjustment` is created
    - Records both before and after quantities via `AdjustmentLine`
    - Requires reason code for audit purposes
    - Automatically updates `Inventory` quantities

## 4. Sales Process (POS Integration)

### Processing Sales

1. **Sales Order Creation**:
    - POS system creates a `SalesOrder` record
    - Items sold are added as `SalesOrderLine` entries
    - System calculates totals with taxes and discounts
2. **Inventory Deduction**:
    - System automatically decreases quantities in the `Inventory` model
    - For serialized items, `SerialNumber` status changes to "SOLD"

### Returns Processing

1. **Handling Returns**:
    - Original sales order status can be changed to "RETURNED"
    - Inventory is adjusted back into stock
    - Serial numbers status changes back to "IN_STOCK"

## 5. Reporting and Analytics

The system provides various reports using the data relationships:

- Stock valuation reports based on current inventory and cost prices
- Sales trends from completed sales orders
- Purchase history and supplier performance metrics
- Inventory movement tracking across all transactions

## Key Relationships That Make This Work:

1. **Location-Item-Inventory**: The `Inventory` model is the junction table between `Item` and `Location` that tracks quantities at specific locations.
2. **Transaction History**: All inventory movements are tracked through related models:
    - `PurchaseOrderLine` → `GoodsReceiptLine` (increases inventory)
    - `TransferLine` (moves inventory between locations)
    - `SalesOrderLine` (decreases inventory)
    - `AdjustmentLine` (corrects inventory)
3. **User Authorization**: The `User` model connects to `Location` to determine which inventory locations a user can access.

This system provides a complete audit trail of every item from the moment it enters your inventory until it's sold or otherwise removed, with full traceability across multiple locations.

## Schema

```jsx
// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Role {
  id           String       @id @default(cuid())
  displayName  String // Human-readable name (e.g., "Store Manager")
  roleName     String       @unique // System name (e.g., "store_manager")
  organisation Organisation @relation(fields: [orgId], references: [id], onDelete: Cascade)
  orgId        String
  description  String?
  permissions  String[] // Array of permission strings
  users        User[]       @relation("UserRoles")
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt

  @@index([roleName])
}

model User {
  id            String       @id @default(cuid())
  name          String
  firstName     String
  lastName      String
  phone         String       @unique
  email         String       @unique
  emailVerified DateTime?
  image         String?
  jobTitle      String?
  roles         Role[]       @relation("UserRoles") // Updated to support multiple roles
  // role          UserRole  @default(USER)
  password      String?
  status        Boolean      @default(true)
  accounts      Account[]
  sessions      Session[]
  savings       Saving[]
  blogs         Blog[]
  orgName       String?
  organisation  Organisation @relation(fields: [orgId], references: [id], onDelete: Cascade)
  orgId         String
  location      Location?    @relation(fields: [locationId], references: [id])
  locationId    String?
  locationName  String?
  isVerfied     Boolean      @default(false)
  token         String?
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  roleId        String?
}

model Location {
  id        String       @id @default(cuid())
  name      String
  type      LocationType
  address   String?
  phone     String?
  email     String?
  isActive  Boolean      @default(true)
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  users     User[]
  // inventories   Inventory[]
  // incomingTransfers Transfer[] @relation("ToLocation")
  // outgoingTransfers Transfer[] @relation("FromLocation")
  // purchaseOrders PurchaseOrder[] @relation("DeliveryLocation")
  // salesOrders   SalesOrder[]   @relation("SalesLocation")
}

model Category {
  id            String     @id @default(cuid())
  title         String
  slug          String     @unique
  imageUrl      String?
  description   String?
  parentId      String?
  parent        Category?  @relation("SubCategories", fields: [parentId], references: [id])
  subCategories Category[] @relation("SubCategories")
  items         Item[]
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
}

model Unit {
  id        String   @id @default(cuid())
  name      String
  symbol    String
  items     Item[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Brand {
  id        String   @id @default(cuid())
  name      String
  slug      String   @unique
  items     Item[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TaxRate {
  id        String   @id @default(cuid())
  name      String
  rate      Float
  items     Item[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Item {
  id                String         @id @default(cuid())
  name              String
  sku               String         @unique
  barcode           String?        @unique
  description       String?
  dimensions        String?
  weight            Float?
  upc               String? //Twelve digit unique number associated with the bar code (Universal Product Code)
  ean               String? //Thirteen digit unique number (International Article Number)
  mpn               String? //Manufacturing Part Number unambiguously identifies a part design
  isbn              String //Thirteen digit unique commercial book identifier (International Standard Book Number)
  categoryId        String?
  category          Category?      @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  taxRateId         String?
  tax               Float //tax rate
  taxRate           TaxRate?       @relation(fields: [taxRateId], references: [id])
  brandId           String?
  brand             Brand?         @relation(fields: [brandId], references: [id])
  unitId            String?
  unit              Unit?          @relation(fields: [unitId], references: [id], onDelete: Cascade)
  unitOfMeasure     String? //unit name
  costPrice         Float          @default(0)
  sellingPrice      Float          @default(0)
  minStockLevel     Int            @default(0)
  maxStockLevel     Int?
  isActive          Boolean        @default(true)
  isSerialTracked   Boolean        @default(false)
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  // inventories   Inventory[]
  serialNumbers     SerialNumber[]
  suppliers         Supplier[]     @relation("SupplierItems")
  supplierRelations ItemSupplier[] // New relation
  // purchaseOrderLines PurchaseOrderLine[]
  // salesOrderLines SalesOrderLine[]
  // transferLines  TransferLine[]
  // adjustmentLines AdjustmentLine[]
}

// Serial number tracking
model SerialNumber {
  id              String       @id @default(cuid())
  serialNumber    String       @unique
  itemId          String
  item            Item         @relation(fields: [itemId], references: [id])
  status          SerialStatus @default(IN_STOCK)
  locationId      String?
  purchaseOrderId String?
  salesOrderId    String?
  notes           String?
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
}

enum SerialStatus {
  IN_STOCK
  SOLD
  RESERVED
  DAMAGED
  RETURNED
}

model ItemSupplier {
  id               String    @id @default(cuid())
  itemId           String
  item             Item      @relation(fields: [itemId], references: [id])
  supplierId       String
  supplier         Supplier  @relation(fields: [supplierId], references: [id])
  isPreferred      Boolean   @default(false)
  supplierSku      String? // Supplier's own SKU for this item
  leadTime         Int? // Typical lead time in days
  minOrderQty      Int? // Minimum order quantity
  unitCost         Decimal // Supplier-specific cost
  lastPurchaseDate DateTime?
  notes            String?

  @@unique([itemId, supplierId])
}

enum LocationType {
  WAREHOUSE
  SHOP
  VIRTUAL
}

model Supplier {
  id                String         @id @default(cuid())
  name              String
  contactPerson     String?
  email             String?
  phone             String?
  address           String?
  taxId             String?
  paymentTerms      Int? // Days
  notes             String?
  isActive          Boolean        @default(true)
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  items             Item[]         @relation("SupplierItems")
  supplierRelations ItemSupplier[] // New relation
  // purchaseOrders PurchaseOrder[]
}

model Organisation {
  id                 String    @id @default(cuid())
  name               String
  slug               String    @unique
  industry           String?
  country            String?
  state              String?
  address            String?
  currency           String?
  timezone           String?
  inventoryStartDate DateTime?
  fiscalYear         String?
  users              User[]
  invites            Invite[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  Role      Role[]

  @@map("organisations") // Maps to "organisations" table in the database [^1]
}

model Invite {
  id           String       @id @default(cuid())
  email        String       @unique
  organisation Organisation @relation(fields: [orgId], references: [id], onDelete: Cascade)
  orgId        String
  status       Boolean      @default(false)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt

  @@map("invites")
}
model ApiKey {
  id        String       @id @default(cuid())
  orgId     String
  key       String       @unique
  name      String
  createdAt DateTime     @default(now())
  org       Organisation @relation(fields: [orgId], references: [id])
}

```

## DATA TABLE

```jsx
 <div className="space-y-4">
      <div className="flex justify-between items-center gap-8">
        <div className="flex-1 w-full">
          <SearchBar
            data={data}
            onSearch={setSearchResults}
            setIsSearch={setIsSearch}
          />
        </div>
        <div className="flex items-center gap-2 ">
          <DateRangeFilter
            data={data}
            onFilter={setFilteredData}
            setIsSearch={setIsSearch}
          />
          <DateFilters
            data={data}
            onFilter={setFilteredData}
            setIsSearch={setIsSearch}
          />

          <DataTableViewOptions table={table} />
        </div>
      </div>

      <div className="rounded-md border">
        <Table>
          <TableHeader>
            {table.getHeaderGroups().map((headerGroup) => (
              <TableRow key={headerGroup.id}>
                {headerGroup.headers.map((header) => {
                  return (
                    <TableHead key={header.id} colSpan={header.colSpan}>
                      {header.isPlaceholder
                        ? null
                        : flexRender(
                            header.column.columnDef.header,
                            header.getContext()
                          )}
                    </TableHead>
                  );
                })}
              </TableRow>
            ))}
          </TableHeader>
          <TableBody>
            {table.getRowModel().rows?.length ? (
              table.getRowModel().rows.map((row) => (
                <TableRow
                  key={row.id}
                  data-state={row.getIsSelected() && "selected"}
                >
                  {row.getVisibleCells().map((cell) => (
                    <TableCell key={cell.id}>
                      {flexRender(
                        cell.column.columnDef.cell,
                        cell.getContext()
                      )}
                    </TableCell>
                  ))}
                </TableRow>
              ))
            ) : (
              <TableRow>
                <TableCell
                  colSpan={columns.length}
                  className="h-24 text-center"
                >
                  No results.
                </TableCell>
              </TableRow>
            )}
          </TableBody>
        </Table>
      </div>
      <DataTablePagination table={table} />
    </div>
```

##